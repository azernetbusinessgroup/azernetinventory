<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#00cc00">
  
  <!-- PWA Meta Tags -->
  <meta name="description" content="Professional inventory management system for businesses">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Azernet">
  <meta name="msapplication-TileColor" content="#00cc00">
  
  <!-- PWA Icons -->
  <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="assets/logo.png">
  <link rel="manifest" href="/manifest.json">
  
  <!-- Stylesheets and Scripts -->
  <link rel="stylesheet" href="inventory.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <title>Inventory Management</title>
</head>
<body>
  <!-- Custom Notification System -->
  <div id="notificationContainer" class="notification-container"></div>
  
  <!-- Custom Confirmation Modal -->
  <dialog id="confirmationModal" class="confirmation-modal">
    <div class="confirmation-content">
      <h3 id="confirmationTitle">Confirm Action</h3>
      <p id="confirmationMessage">Are you sure you want to proceed?</p>
      <div class="confirmation-buttons">
        <button id="confirmYes" class="btn btn-primary">Yes</button>
        <button id="confirmNo" class="btn btn-secondary">No</button>
      </div>
    </div>
  </dialog>

  <!-- Success Message Modal -->
  <dialog id="successModal" class="success-modal">
    <div class="success-content">
      <div class="success-icon">âœ“</div>
      <h3>Success!</h3>
      <p id="successMessage">Operation completed successfully.</p>
      <button id="successClose" class="btn btn-primary">OK</button>
    </div>
  </dialog>

  <!-- Profile Name Edit Modal -->
  <dialog id="editNameModal" class="edit-name-modal">
    <div class="edit-name-content">
      <h3>Edit Name</h3>
      <input type="text" id="editNameInput" placeholder="Enter new name" class="edit-name-input">
      <div class="edit-name-buttons">
        <button id="saveNameBtn" class="btn btn-primary">Save</button>
        <button id="cancelNameBtn" class="btn btn-secondary">Cancel</button>
      </div>
    </div>
  </dialog>

  <header>
    <div class="header-icons">
      <div class="settings-container">
        <img src="assets/settings.png" alt="Settings" class="icon settings-icon" style="width:24px;height:24px;">
        <div id="settingsDropdown" class="settings-dropdown hidden">
          <div class="dropdown-inner">
            <div class="dropdown-actions">
              <div class="dropdown-item" data-settings="inventory">Inventory Management</div>
              <div class="dropdown-item" data-settings="accounts">Accounts and Security</div>
              <div class="dropdown-item" data-settings="detailed">Detailed Report</div>
              <div class="dropdown-item" data-settings="contact">Contact Us</div>
              <div class="dropdown-item" data-settings="about">About Us</div>
            </div>
          </div>
        </div>
      </div>
      <h1 id="storeNameTitle">Store Name</h1>
      <div class="user-controls">
        <button id="profileBtn" class="profile-btn" aria-haspopup="true" aria-expanded="false">
          <img id="profileImage" src="assets/profile.png" alt="Profile" class="icon">
        </button>
      </div>
    </div>

    <!-- Profile Dropdown -->
    <div id="profileDropdown" class="profile-dropdown hidden" role="menu" aria-labelledby="profileBtn">
      <div class="dropdown-inner">
        <div class="profile-avatar-container">
          <img id="profileImageLarge" src="assets/profile.png" alt="Profile" class="profile-avatar">
        </div>
        <div id="profileName" class="profile-name">User</div>
        <div class="dropdown-actions">
          <button id="editProfileBtn" class="dropdown-item">Edit profile picture</button>
          <button id="editNameBtn" class="dropdown-item">Edit name</button>
          <button id="logoutBtn" class="dropdown-item danger">Logout</button>
        </div>
      </div>
    </div>
    
  </header>

  <div class="search-container">
    <input type="text" id="search" placeholder="Search item..." aria-label="Search items">
    <div style="position: relative;">
      <img src="assets/filter.png" alt="Filter" class="icon filter-icon" style="width:30px;height:30px;">
      <div id="filterMenu" class="filter-menu hidden" role="menu" aria-label="Filter menu"></div>
    </div>
  </div>

  <main id="inventoryList"></main>

  <footer>
    <button id="addItem">Add Item</button>
    <button id="quickReport">Quick Report</button>
    <button id="sell">Sell Items</button>
  </footer>

  <!-- Add Item Modal -->
  <dialog id="addItemModal">
    <div class="modal-header">
      <img src="assets/close.png" alt="Close" class="close-icon" style="width:24px;height:24px;">
    </div>
    <div class="image-upload">
      <img src="assets/placeholder.png" alt="Add Image" id="imagePlaceholder" style="width:100px;height:100px;cursor:pointer;">
    </div>
    <form id="addItemForm">
      <label>Item Name: <input type="text" name="name" required></label>
      <label>Item Type: <input type="text" name="type" required></label>
      <label>Purchase Price (ETB):
        <div class="purchase-row">
          <input type="number" name="purchasePrice" required>
          <select name="paymentStatus" aria-label="Payment Status">
            <option value="paid">Paid</option>
            <option value="unpaid">Unpaid</option>
          </select>
        </div>
      </label>
      <div class="input-row">
        <label>Quantity:
          <div class="quantity-container" style="border-radius: 0px 0px 0px 0px;">
          <input type="number" name="quantityValue">
          <select name="quantityType">
            <option value="packs">Packs</option>
            <option value="pieces">Pieces</option>
          </select>
          </div>
        </label>
        <label>Pcs per Pack: <input type="number" name="amountInPack" style="width: 85px;" required></label>
      </div>
      <p>Optional</p>
              <label>Selling Price (ETB): <input type="number" name="sellingPrice" required></label>
      <label>Description: <textarea name="description"></textarea></label>
      <button type="submit">Save</button>
    </form>
  </dialog>

  <!-- Item Detail Modal -->
  <dialog id="itemDetailModal">
    <div class="modal-header">
      <img src="assets/edit.png" alt="Edit" id="detailEditIcon" class="edit-icon">
      <img src="assets/close.png" alt="Close" class="close-icon detail-close" style="width:24px;height:24px;">
    </div>
    <div id="itemDetailContent" class="item-detail-content"></div>
  </dialog>

  <!-- Multi Sell Modal -->
  <dialog id="sellItemsModal">
    <div class="sell-items-header">
      <img src="assets/close.png" alt="Close" id="sellItemsClose" class="close-icon" style="width:24px;height:24px;">
    </div>
    <div class="sell-items-content">
      <div class="sell-items-counter" id="sellCounter">0 / 0</div>
      <div id="sellItemsContent" class="item-detail-content"></div>
      <div class="sell-items-navigation">
        <img src="assets/previous.png" alt="Previous" id="sellPrev" class="nav-icon">
        <div class="sell-items-actions" style="text-align:center;">
        <button id="sellAllBtn" disabled>Sell</button>
      </div>
        <img src="assets/next.png" alt="Next" id="sellNext" class="nav-icon">
      </div>
      
    </div>
  </dialog>

  <!-- Quick Report Modal -->
  <dialog id="quickReportModal">
    <div class="modal-header">
      <img src="assets/close.png" alt="Close" id="quickReportClose" class="close-icon" style="width:24px;height:24px;">
    </div>
    <div class="quick-report">
      <h3>Daily Report</h3>
      <div class="quick-row"><span>Date</span><span id="qrDate">-</span></div>
      <div class="quick-row"><span>Total Purchases</span><span id="qrPurchases">0</span></div>
      <div class="quick-row"><span>Total Sales</span><span id="qrSales">0</span></div>
      <div class="quick-row"><span>Profit </span><span id="qrProfit">0</span></div>
      <div class="quick-row"><span>Payables</span><span id="qrPayables">0</span></div>
      <div class="quick-row"><span>Receivables</span><span id="qrReceivables">0</span></div>
      <div class="quick-row"><span>Number of Items Sold</span><span id="qrItemsSold">0</span></div>
      <div class="quick-actions">
        <button id="qrBtnSold">Items Sold</button>
        <button id="qrBtnPurchased">Items Purchased</button>
        <button id="qrBtnPayables">Payables</button>
        <button id="qrBtnReceivables">Receivables</button>
      </div>
      <div id="qrList" class="quick-list hidden"></div>
    </div>
  </dialog>

  <!-- Sale Confirmation Modal -->
  <dialog id="saleConfirmationModal">
    <div class="modal-header">
      <img src="assets/close.png" alt="Close" id="saleConfirmationClose" class="close-icon" style="width:24px;height:24px;">
    </div>
    <div class="sale-confirmation">
      <h3>Sale Successful!</h3>
      <p id="confirmationMessage">You have successfully sold to <span id="confirmationCustomerName">Customer</span>.</p>
      <div id="confirmationItems" class="confirmation-items"></div>
      <div class="confirmation-total">
        <strong>Total Price: <span id="confirmationTotal">0</span> ETB</strong>
      </div>
    </div>
  </dialog>

  <!-- Full Screen Table View -->
  <div id="fullScreenTable" class="full-screen-table hidden">
    <div class="table-header">
      <img src="assets/back.png" alt="Back" id="tableBackBtn" class="back-icon">
      <h2 id="tableTitle">Table Title</h2>
    </div>
    <div id="tableContent" class="table-content">
      <!-- Table content will be inserted here -->
    </div>
  </div>

  <!-- Settings Pages -->
  <!-- Inventory Management Settings -->
  <div id="inventorySettings" class="settings-page hidden">
    <div class="settings-header">
      <img src="assets/back.png" alt="Back" class="back-icon settings-back-btn">
      <h2>Inventory Management</h2>
      <button class="save-btn">Save</button>
    </div>
    <div class="settings-content">
      <div class="settings-section">
        <h3>Inventory List</h3>
        <div class="setting-item" style="flex-direction: row;">
          <label>Show purchase price</label>
          <label class="toggle">
            <input type="checkbox" id="showPurchasePrice">
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-item" style="flex-direction: row;">
          <label>Show selling price</label>
          <label class="toggle">
            <input type="checkbox" id="showSellingPrice">
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-item" style="flex-direction: row;">
          <label>Show stock in pieces</label>
          <label class="toggle">
            <input type="checkbox" id="showAmountUnits" checked>
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-item" style="flex-direction: row;">
          <label>Show stock in packs</label>
          <label class="toggle">
            <input type="checkbox" id="showAmountPacks">
            <span class="slider"></span>
          </label>
        </div>
      </div>
      
      <div class="settings-section" id="quickReportSettings">
        <h3>Quick Report</h3>
        <div class="setting-item" style="flex-direction: row;">
          <label>Items sold</label>
          <label class="toggle">
            <input type="checkbox" id="showItemsSold" checked>
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-item" style="flex-direction: row;">
          <label>Items purchased</label>
          <label class="toggle">
            <input type="checkbox" id="showItemsPurchased">
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-item" style="flex-direction: row;">
          <label>Payables</label>
          <label class="toggle">
            <input type="checkbox" id="showPayables" checked>
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-item" style="flex-direction: row;">
          <label>Receivables</label>
          <label class="toggle">
            <input type="checkbox" id="showReceivables" checked>
            <span class="slider"></span>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- Accounts & Security Settings -->
  <div id="accountsSettings" class="settings-page hidden">
    <div class="settings-header">
      <img src="assets/back.png" alt="Back" class="back-icon settings-back-btn">
      <h2>Accounts and Security</h2>
      <button class="save-btn">Save</button>
    </div>
    <div class="settings-content">
      <div class="settings-section">
        <h3>Account Information</h3>
        <div class="setting-item">
          <label>Change Email or Phone Number</label>
          <input type="text" id="newEmailPhone" placeholder="Enter new email or phone">
        </div>
        <div class="setting-item">
          <label>Change Password</label>
          <input type="password" id="oldPassword" placeholder="Old password">
          <input type="password" id="newPassword" placeholder="New password">
        </div>
        <div class="setting-item">
          <label>Edit Store Name</label>
          <input type="text" id="newStoreName" placeholder="Enter new store name">
        </div>
        <div class="setting-item">
          <label>Edit Store Type</label>
          <input type="text" id="newStoreType" placeholder="Enter new store type">
        </div>
      </div>
      
      <div class="settings-section">
        <h3>Subscription</h3>
        <div class="contact-item">
          <span class="contact-label">Premium Renewal</span>
          <span class="subscription-date" id="subscriptionDate">2025-01-01</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Detailed Report Settings -->
  <div id="detailedSettings" class="settings-page hidden">
    <div class="settings-header">
      <img src="assets/back.png" alt="Back" class="back-icon settings-back-btn">
      <h2>Detail Report</h2>
      <select id="durationSelector" class="duration-selector">
        <option value="weekly">Weekly</option>
        <option value="monthly" selected>Monthly</option>
        <option value="annual">Annual</option>
      </select>
    </div>
    <div class="settings-content">
      <!-- General Report Section -->
      <div class="report-section">
        <h3>General Report</h3>
        <div class="metrics-grid">
          <div class="metric-card">
            <div class="metric-label">Total Purchases</div>
            <div class="metric-value" id="totalPurchases">0.00 ETB</div>
          </div>
          <div class="metric-card">
            <div class="metric-label">Total Sales</div>
            <div class="metric-value" id="totalSales">0.00 ETB</div>
          </div>
          <div class="metric-card">
            <div class="metric-label">Profit</div>
            <div class="metric-value" id="totalProfit">0.00 ETB</div>
          </div>
          <div class="metric-card">
            <div class="metric-label">Payables</div>
            <div class="metric-value" id="totalPayables">0.00 ETB</div>
          </div>
          <div class="metric-card">
            <div class="metric-label">Receivables</div>
            <div class="metric-value" id="totalReceivables">0.00 ETB</div>
          </div>
          <div class="metric-card">
            <div class="metric-label">Items Sold</div>
            <div class="metric-value" id="totalItemsSold">0</div>
          </div>
        </div>
        
        <!-- Time-based Graph -->
        <div class="graph-section">
          <h4>Graph Analysis</h4>
          <div class="graph-controls">
            <select id="graphVariable" class="graph-selector">
              <option value="profit">Profit</option>
              <option value="sales">Total Sales</option>
              <option value="purchases">Total Purchases</option>
            </select>
          </div>
          <div class="graph-container">
            <canvas id="timeGraph" width="400" height="200"></canvas>
          </div>
        </div>
      </div>

      <!-- Payables Section -->
      <div class="report-section">
        <h3>Payables</h3>
        <div class="table-container">
          <table class="report-table" id="payablesTable">
            <thead>
              <tr>
                <th>Item Name</th>
                <th>Amount</th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody id="payablesTableBody">
              <!-- Data will be populated dynamically -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Receivables Section -->
      <div class="report-section">
        <h3>Receivables</h3>
        <div class="table-container">
          <table class="report-table" id="receivablesTable">
            <thead>
              <tr>
                <th>Customer Name</th>
                <th>Amount</th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody id="receivablesTableBody">
              <!-- Data will be populated dynamically -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- History Section -->
      <div class="report-section">
        <h3>History</h3>
        <div class="history-list" id="historyList">
          <!-- History entries will be populated dynamically -->
        </div>
      </div>

      <!-- Stock Report Section -->
      <div class="report-section">
        <h3>Stock Report</h3>
        <div class="stock-categories">
          <div class="stock-category">
            <h4>Low Stock</h4>
            <div class="stock-items" id="lowStockItems">
              <!-- Low stock items will be populated dynamically -->
            </div>
          </div>
          <div class="stock-category">
            <h4>High Stock</h4>
            <div class="stock-items" id="highStockItems">
              <!-- High stock items will be populated dynamically -->
            </div>
          </div>
          <div class="stock-category">
            <h4>Top Selling</h4>
            <div class="stock-items" id="topSellingItems">
              <!-- Top selling items will be populated dynamically -->
            </div>
          </div>
          <div class="stock-category">
            <h4>Low Demand</h4>
            <div class="stock-items" id="lowDemandItems">
              <!-- Low demand items will be populated dynamically -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Contact Us Settings -->
  <div id="contactSettings" class="settings-page hidden">
    <div class="settings-header">
      <img src="assets/back.png" alt="Back" class="back-icon settings-back-btn">
      <h2>Contact Us</h2>
    </div>
    <div class="settings-content">
      <div class="settings-section">
        <h3>Contact Information</h3>
        <div class="contact-item">
          <span class="contact-label">Phone Numbers:</span>
          <span class="contact-value">+251951068598</span>
        </div>
        <div class="contact-item">
          <span class="contact-label"></span>
          <span class="contact-value">+251983845420</span>
        </div>
        <div class="contact-item">
          <span class="contact-label">Email:</span>
          <span class="contact-value">Azernetbusiness@gmail.com</span>
        </div>
        <div class="contact-item">
          <span class="contact-label">Telegram:</span>
          <span class="contact-value">@Azernetbusiness</span>
        </div>
      </div>
    </div>
  </div>

  <!-- About Us Settings -->
  <div id="aboutSettings" class="settings-page hidden">
    <div class="settings-header">
      <img src="assets/back.png" alt="Back" class="back-icon settings-back-btn">
      <h2>About Us</h2>
    </div>
    <div class="settings-content">
      <div class="settings-section">
        <div class="about-logo">
          <div class="logo-circle">
            <img src="assets/logo.png" alt="Azernet Logo" class="about-logo-img">
          </div>
        </div>
        <div class="about-description">
          Azernet is a business group dedicated to integrating technology into traditional business practices in Ethiopia. Azernet Inventory is one of its flagship applications, designed to modernize and streamline inventory management for local enterprises.
        </div>
      </div>
    </div>
  </div>

  <script src="inventory.js"></script>
  <script src="pwa.js"></script>
</body>
</html>
